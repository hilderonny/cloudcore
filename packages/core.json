{"entities":{"routers":[{"id":"80e51228-ea90-47b7-955e-c486ccfc8caa","code":"var router = require('express').Router();\n\n// Spalten\n\nrouter.get('/columns/:tablename', async (req, res) => {\n    var result = await req.db.query(\"SELECT * FROM information_schema.columns WHERE table_name = '\" + req.params.tablename + \"';\");\n    res.json(result.error || result.rows);\n});\n\nrouter.post('/columns/:tablename/:columnname/:columntype', async (req, res) => {\n    var result = await req.db.query(\"ALTER TABLE \" + req.params.tablename + \" ADD \" + req.params.columnname + \" \" + req.params.columntype + \";\");\n    res.json(result.error || result.rows);\n});\n\nrouter.delete('/columns/:tablename/:columnname', async (req, res) => {\n    var result = await req.db.query(\"ALTER TABLE \" + req.params.tablename + \" DROP COLUMN \" + req.params.columnname + \";\");\n    res.json(result.error || result.rows);\n});\n\n// Tabellen\n\nrouter.get('/tables', async (req, res) => {\n    var result = await req.db.query(\"SELECT * FROM information_schema.tables WHERE table_schema != 'pg_catalog' AND table_schema != 'information_schema';\");\n    res.json(result.rows);\n});\n\nrouter.post('/tables/:tablename', async (req, res) => {\n    res.json(await req.db.query(\"CREATE TABLE \" + req.params.tablename + \" (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), userid UUID, ispublic BOOLEAN DEFAULT false);\"));\n});\n\nrouter.delete('/tables/:tablename', async (req, res) => {\n    res.json(await req.db.query(\"DROP TABLE \" + req.params.tablename + \";\"));\n});\n\nmodule.exports = router;","url":"/api-schema","userid":"6f6b93ae-94e5-45b0-904f-83a8b37e1627","ispublic":true},{"id":"9a9b9ddf-df1a-421e-99b9-94da235814ca","code":"var router = require('express').Router();\r\n\r\nrouter.get('/list/:tablename', async (req, res) => {\r\n    var result = await req.db.query(`SELECT * FROM ${req.params.tablename};`);\r\n    res.json(result.error || result.rows);\r\n});\r\n\r\nrouter.get('/list/:tablename/:columns', async (req, res) => {\r\n    var result = await req.db.query(`SELECT ${req.params.columns} FROM ${req.params.tablename};`);\r\n    res.json(result.error || result.rows);\r\n});\r\n\r\nrouter.get('/list/:tablename/:columns/:filter', async (req, res) => {\r\n    var result = await req.db.query(`SELECT ${req.params.columns} FROM ${req.params.tablename} ${req.params.filter};`);\r\n    res.json(result.error || result.rows);\r\n});\r\n\r\nrouter.get('/:tablename/:id', async (req, res) => {\r\n    var result = await req.db.query(\"SELECT * FROM \" + req.params.tablename + \" WHERE id = '\" + req.params.id + \"';\");\r\n    res.json(result.error || result.rows);\r\n});\r\n\r\nrouter.post('/:tablename', async (req, res) => {\r\n    var keys = Object.keys(req.body);\r\n    var values = Object.values(req.body).map(value => ((typeof value) === 'string') ? \"'\" + (value.replace(/\\'/g, '\\'\\'')) + \"'\" : value);\r\n    var query = \"INSERT INTO \" + req.params.tablename + \" (\" + keys.join(',') + \") VALUES (\" + values.join(',') + \") RETURNING id;\";\r\n    var result = await req.db.query(query);\r\n    res.json(result.error || result.rows);\r\n});\r\n\r\nrouter.put('/:tablename/:id', async (req, res) => {\r\n    var query = \"UPDATE \" + req.params.tablename + \" SET \" + Object.keys(req.body).map(key => {\r\n        var value = req.body[key];\r\n        return key + \"=\" + (((typeof value) === 'string') ? \"'\" + (value.replace(/\\'/g, '\\'\\'')) + \"'\" : value);\r\n    }).join(',') + \" WHERE id='\" + req.params.id + \"';\";\r\n    var result = await req.db.query(query);\r\n    res.json(result.error || result.rows);\r\n});\r\n\r\nrouter.delete('/:tablename/:id', async (req, res) => {\r\n    var result = await req.db.query(\"DELETE FROM \" + req.params.tablename + \" WHERE id = '\" + req.params.id + \"';\");\r\n    res.json(result.error || result.rows);\r\n});\r\n\r\nmodule.exports = router;","url":"/api-data","userid":"6f6b93ae-94e5-45b0-904f-83a8b37e1627","ispublic":true}],"views":[{"id":"c7f65743-ccc5-4dce-86ec-6ace01fb01c6","content":"<p><a href=\"/setup/editor\">Editor</a></p>\n<p><a href=\"/setup/tables\">Tabellen</a></p>\n","contenttype":"text/html","url":"/","userid":"6f6b93ae-94e5-45b0-904f-83a8b37e1627","ispublic":true},{"id":"b344c26c-d088-4116-ab52-035cdde82a9e","content":"// Siehe https://developers.google.com/web/updates/2017/01/webcomponents-org\n// Und https://googlechromelabs.github.io/howto-components/howto-checkbox/#demo\n// ccc steht für CloudCoreComponent\n(function() {\n\n    var template = document.createElement('template');\n    template.innerHTML = `\n    <style>\n        :host {\n            border-bottom: 3px solid #0070d2;\n            display: flex;\n            background-color: white;\n        }\n        :host > launcherbutton:before {\n            content: \"⸬\";\n            display: flex;\n            font-size: 21px;\n            padding: 0 14px;\n        }\n        :host > label {\n            font-size: 18px;\n            padding-right: 24px;\n            line-height: 32px;\n        }\n        :host > tablist {\n            display: flex;\n        }\n        :host > tablist > tab {\n            padding: 0 12px;\n            line-height: 30px;\n            border-style: solid;\n            border-width: 3px 0;\n            border-color: transparent;\n            margin-bottom: -3px;\n        }\n        :host > tablist > tab > a, \n        :host > tablist > tab > a:hover {\n            text-decoration: none;\n            color: #080707;\n            padding: 0 12px;\n            line-height: 30px;\n            margin: 0 -12px;\n            display: block;\n        }\n        :host > tablist > tab:hover {\n            border-bottom-color: rgba(0, 0, 0, 0.4);\n            background-color: rgba(0, 112, 210, 0.1);\n        }\n        :host > tablist > tab[selected] {\n            border-top-color: #0070d2;\n            background-color: rgba(0, 112, 210, 0.1);\n        }\n    </style>\n    `;\n\n    class GlobalNav extends HTMLElement {\n\n        static get observedAttributes() {\n            return ['selectedurl'];\n        }\n\n        constructor() {\n            super();\n            this.tabs = [];\n            this.attachShadow({mode: 'open'});\n            this.shadowRoot.appendChild(template.content.cloneNode(true));\n            this.launcherButton = document.createElement('launcherbutton');\n            this.shadowRoot.appendChild(this.launcherButton);\n            this.label = document.createElement('label');\n            this.label.innerHTML = 'Setup';\n            this.shadowRoot.appendChild(this.label);\n            this.tabList = document.createElement('tablist');\n            this.shadowRoot.appendChild(this.tabList);\n        }\n\n        async connectedCallback() {\n            var tabs = await (await fetch('/api-data/list/tabs')).json();\n            tabs.sort((t1, t2) => t1.label > t2.label ? 1 : -1);\n            for (var tab of tabs) {\n                tab.tabElement = this.addTab(tab);\n                this.tabs.push(tab);\n            }\n            if (this.selectedurl) this.setselectedurl(this.selectedurl);\n        }\n\n        setselectedurl(selectedurl) {\n            this.selectedurl = selectedurl;\n            for (var tab of this.tabs) {\n                if (tab.url === selectedurl) {\n                    tab.tabElement.setAttribute('selected', 'selected');\n                } else {\n                    tab.tabElement.removeAttribute('selected');\n                }\n            }\n        }\n\n        attributeChangedCallback(name, _, newValue) {\n            if (name === 'selectedurl') this.setselectedurl(newValue);\n        }\n\n        addTab(tab) {\n            var tabElement = document.createElement('tab');\n            var a = document.createElement('a');\n            a.innerHTML = tab.label;\n            a.setAttribute('href', tab.url);\n            tabElement.appendChild(a);\n            this.tabList.appendChild(tabElement);\n            return tabElement;\n        }\n\n    }\n\n    window.customElements.define('cc-globalnav', GlobalNav);\n\n})();","contenttype":"text/javascript","url":"/ccc/cc-globalnav","userid":"6f6b93ae-94e5-45b0-904f-83a8b37e1627","ispublic":true},{"id":"77c30dd7-0131-425b-a264-2150d0615f02","content":"html,\r\nbody {\r\n    margin: 0;\r\n    padding: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    overflow: hidden;\r\n}\r\nbody {\r\n    display: flex;\r\n    flex-direction: column;\r\n    font-family: sans-serif;\r\n    font-size: 13px;\r\n    color: #080707;\r\n    background-image: url(https://www.lightningdesignsystem.com/assets/images/themes/oneSalesforce/banner-brand-default.png), linear-gradient(0, rgba(176, 196, 223, 1), 85%, #195594);\r\n    background-repeat: repeat-x;\r\n    position: relative;\r\n    overflow: auto;\r\n}\r\nbody::after {\r\n    content: \"\";\r\n    background-image: linear-gradient(0, rgba(176, 196, 223, 1), 90%, transparent\r\n    );\r\n    height: 100%;\r\n    top: 0;\r\n    position: absolute;\r\n    left: 0;\r\n    width: 100%;\r\n    z-index: -1;\r\n}\r\na {\r\n    color: rgb(0, 109, 204);\r\n    text-decoration: none;\r\n}\r\na:hover {\r\n    text-decoration: underline;\r\n}\r\nbutton-row {\r\n    display: block;\r\n    text-align: right;\r\n    padding: 12px 12px 0 12px;\r\n}\r\nbutton-row > a {\r\n    margin: 0 16px;\r\n}\r\nform-title {\r\n    font-size: 17px;\r\n    padding: 16px 12px 0 12px;\r\n}\r\nheader {\r\n    margin: 12px 12px 0 12px;\r\n    border-radius: 4px;\r\n    border: 1px solid #ccc;\r\n    box-shadow: 1px 1px 3px -1px rgba(0, 0, 0, 0.5);\r\n    padding: 16px;\r\n    background-color: rgb(243, 242, 242);\r\n    display: flex;\r\n    position: relative;\r\n}\r\nheader > img {\r\n    filter: invert(1);\r\n    background-color: coral;\r\n    border-radius: 3px;\r\n    padding: 7px;\r\n    margin-right: 16px;\r\n}\r\nheader > page-title {\r\n    display: block;\r\n    flex: 1;\r\n    font-size: 18px;\r\n    font-weight: bold;\r\n    line-height: 38px;\r\n    overflow: hidden;\r\n    white-space: nowrap;\r\n    text-overflow: ellipsis;\r\n}\r\nheader > subtitle {\r\n    position: absolute;\r\n    left: 70px;\r\n    color: rgb(62, 62, 60);\r\n}\r\nheader > subtitle + page-title {\r\n    line-height: 22px;\r\n    margin-top: 16px;\r\n}\r\nheader > button,\r\nbutton-row > button {\r\n    background-color: #fff;\r\n    padding: 0 16px;\r\n    border: solid rgb(221, 219, 218);\r\n    line-height: 30px;\r\n    margin: 4px 0;\r\n    border-width: 1px 1px 1px 0;\r\n    color: rgb(27, 82, 151);\r\n    font-size: 13px;\r\n    cursor: pointer;\r\n}\r\nheader > button > select {\r\n    border: none;\r\n    display: block;\r\n    background-color: transparent;\r\n    padding: 7px 16px;\r\n    margin: 0 -16px;\r\n    color: rgb(27, 82, 151);    \r\n}\r\nheader > button > label,\r\nbutton-row > button > label {\r\n    border: none;\r\n    display: block;\r\n    cursor: pointer;\r\n    background-color: transparent;\r\n    padding: 0 16px;\r\n    margin: 0 -16px;\r\n    color: rgb(27, 82, 151);    \r\n}\r\nheader > button > label > input {\r\n    display: none;\r\n}\r\nheader > button:hover,\r\nbutton-row > button:hover {\r\n    background-color: rgb(243, 242, 242);\r\n}\r\nheader > button:first-of-type,\r\nbutton-row > button:first-of-type {\r\n    border-left-width: 1px;\r\n    border-top-left-radius: 4px;\r\n    border-bottom-left-radius: 4px;\r\n    margin-left: 16px;\r\n}\r\nheader > button:last-of-type,\r\nbutton-row > button:last-of-type {\r\n    border-right-width: 1px;\r\n    border-top-right-radius: 4px;\r\n    border-bottom-right-radius: 4px;\r\n}\r\ncolumns {\r\n    display: flex;\r\n    flex: 1;\r\n}\r\ncolumns.two-fix-flex > *:first-child {\r\n    flex: unset;\r\n    margin-right: 0;\r\n}\r\ncontent {\r\n    margin: 12px 12px 0 12px;\r\n    border-radius: 4px;\r\n    border: 1px solid #ccc;\r\n    box-shadow: 1px 1px 3px -1px rgba(0, 0, 0, 0.5);\r\n    flex: 1;\r\n    overflow: auto;\r\n    background-color: #fff;\r\n}\r\nlogin-form {\r\n    width: 300px;\r\n    margin: auto;\r\n    border-radius: 4px;\r\n    border: 1px solid #ccc;\r\n    box-shadow: 1px 1px 3px -1px rgba(0, 0, 0, 0.5);\r\n    padding: 16px 0;\r\n    background-color: #fff;\r\n    display: flex;\r\n}\r\nlogin-form > form {\r\n    display: flex;\r\n    flex-direction: column;\r\n    flex: 1;\r\n}\r\ntable {\r\n    border-spacing: 0;\r\n    width: 100%;\r\n}\r\ntable > thead > tr > th,\r\ntable > tbody > tr > td {\r\n    padding: 4px 8px;\r\n    text-align: start;\r\n    overflow: hidden;\r\n    max-width: 0;\r\n    white-space: nowrap;\r\n    text-overflow: ellipsis;\r\n    border-bottom: 1px solid rgb(221, 219, 218);\r\n}\r\ntable > thead > tr > th > a,\r\ntable > tbody > tr > td > a {\r\n    display: block;\r\n    margin: -4px -8px;\r\n    padding: 4px 8px;\r\n}\r\ntable > thead > tr > th {\r\n    background-color: rgb(250, 250, 249);\r\n    line-height: 24px;\r\n}\r\ntable > tbody > tr > td {\r\n    line-height: 21px;\r\n}\r\ntable > tbody > tr:last-child > td {\r\n    border-bottom: none;\r\n}\r\ntable > tbody > tr:hover > td {\r\n    background-color: rgb(243, 242, 242);\r\n    box-shadow: rgb(221, 219, 218) 0px -1px 0px 0px inset, rgb(221, 219, 218) 0px 1px 0px 0px inset;\r\n}\r\ntable > tbody > tr > td:hover {\r\n    background-color: #fff;\r\n}\r\ntable > tbody > tr.selected > td {\r\n    background-color: rgb(243, 242, 242);\r\n}\r\ninput-field {\r\n    display: block;\r\n    position: relative;\r\n    padding: 22px 12px 0 12px;\r\n}\r\ninput-field > input {\r\n    display: block;\r\n    border: solid rgb(221, 219, 218);\r\n    width: 100%;\r\n    border-width: 0 0 1px 0;\r\n    font-size: 14px;\r\n    line-height: 22px;\r\n    padding: 0 4px;\r\n    box-sizing: border-box;\r\n}\r\ninput-field > select {\r\n    display: block;\r\n    width: 100%;\r\n    border: solid rgb(221, 219, 218);\r\n    border-width: 0 0 1px 0;\r\n    padding: 3px 4px 2px 4px;    \r\n}\r\ninput-field > textarea {\r\n    display: block;\r\n    border: 1px solid rgb(221, 219, 218);\r\n    border-radius: 4px;\r\n    font-size: 14px;\r\n    padding: 4px;\r\n    box-sizing: border-box;\r\n    min-width: 100%;\r\n    max-width: 100%;\r\n}\r\ninput-field > label {\r\n    position: absolute;\r\n    top: 8px;\r\n    left: 16px;\r\n    color: #ccc;\r\n    font-size: 11px;\r\n}\r\ninput-field > input::placeholder {\r\n    color: #ccc;\r\n}\r\ninput-field > input:placeholder-shown + label {\r\n    display: none;\r\n}\r\nbody > content:last-of-type,\r\nbody > columns:last-of-type {\r\n    margin-bottom: 12px;\r\n}\r\nbutton.green {\r\n    background-color:lightgreen;\r\n}\r\n.cols-2 {\r\n    columns: 2;\r\n    column-gap: 0;\r\n}\r\n","contenttype":"text/css","url":"/assets/slds.css","userid":"6f6b93ae-94e5-45b0-904f-83a8b37e1627","ispublic":true}],"users":[{"id":"6f6b93ae-94e5-45b0-904f-83a8b37e1627","username":"system","password":null}]},"id":"e842cea5-da51-4801-9403-1a8bd82a178b","name":"core","fields":{"apps":{"label":"text","userid":"uuid","ispublic":"boolean"},"tabs":{"url":"text","label":"text","appid":"uuid","userid":"uuid","ispublic":"boolean"},"routers":{"code":"text","url":"text","userid":"uuid","ispublic":"boolean"},"users":{"username":"text","password":"text"},"views":{"content":"text","contenttype":"text","url":"text","userid":"uuid","ispublic":"boolean"}}}